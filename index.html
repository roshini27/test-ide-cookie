<!DOCTYPE html>
<html>
<head>
  <title>DoubleClick Quick Sync Test</title>
</head>
<body>

<h2>DoubleClick Quick Cookie Sync Test</h2>
<p>Open DevTools â†’ Network + Application â†’ Cookies</p>

<script>
(async function () {
  console.log("ğŸš€ Starting Quick DoubleClick Sync Test");

  const GOOGLE_NID = "1686285891"; // your real network ID

  // Create a random test user
  const uid = "u_" + Math.random().toString(36).substring(2) + Date.now();
  console.log("Test UID:", uid);

  // SHA1 hash (official Google format)
  async function sha1(msg) {
    const buf = new TextEncoder().encode(msg);
    const hash = await crypto.subtle.digest("SHA-1", buf);
    return Array.from(new Uint8Array(hash))
      .map(b => b.toString(16).padStart(2, "0"))
      .join("");
  }

  const hashed = await sha1(uid);

  const pixelUrl =
    "https://cm.g.doubleclick.net/pixel?" +
    "google_nid=" + GOOGLE_NID +
    "&google_hm=" + hashed +
    "&google_cm";

  console.log("âœ… Firing Pixel:", pixelUrl);

  const img = new Image();
  img.onload = () => console.log("âœ… Pixel loaded (request sent)");
  img.onerror = () => console.error("âŒ Pixel blocked");

  img.src = pixelUrl;
})();
</script>

</body>
</html>
